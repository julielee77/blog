<h1 id="ie兼容性总结">IE兼容性总结</h1>
<p>（注：文中所涉及IE版本均包含自身。文中也会适当提及其它浏览器的兼容性。）
##概况
IE9+基本已和chrome兼容性差不多，而IE7-市场占有率基本可不考虑，因此一般考虑的是IE8的兼容性。</p>

<p>目前最新的windows10默认浏览器已换成spartan，而IE11将不做重大修改，这预示着微软已自动放弃IE浏览器。</p>

<p>补充：jquery框架1.X版本支持IE7-，解决了很多IE兼容性问题，且便于操作DOM。其2.X版本支持IE8+。</p>
<h2 id="htmlcss兼容情况">HTML/CSS兼容情况</h2>
<p>IE8-一般不支持HTML5和CSS3，无特殊情况以下将不讨论。</p>
<h3 id="html">HTML</h3>
<h3 id="css">CSS</h3>
<ol>
  <li>
    <p>外部样式</p>

    <p>若外部样式文件中有中文注释，IE6-会导致其无法生效。可在css文件开头使用 <code class="highlighter-rouge">@charset "utf-8";</code></p>
  </li>
  <li>选择器
    <ul>
      <li>
        <p>类／子代／相邻兄弟选择器 IE6-不支持</p>

        <p>IE6-不支持多类选择器（对应不支持HTML多类写法）</p>

        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  /*将匹配最后一个类*/
  .urgent.warning{font-weight:bold};
</code></pre></div>        </div>
      </li>
      <li>
        <p>属性选择器</p>

        <p>IE6-不支持属性选择器子串匹配</p>

        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  p[class^="en"]{text-decoration:underline;}
</code></pre></div>        </div>
      </li>
      <li>
        <p>伪类选择器</p>

        <p><strong>动态伪类选择器（<code class="highlighter-rouge">:focus</code>, <code class="highlighter-rouge">:hover</code>, <code class="highlighter-rouge">:active</code>）</strong></p>

        <p>IE6-只支持a元素的动态伪类选择。IE7支持所有元素的 <code class="highlighter-rouge">:hover</code>选择。</p>

        <p><code class="highlighter-rouge">:first-child</code> <code class="highlighter-rouge">:last-child</code></p>
      </li>
    </ul>
  </li>
  <li>
    <p>HTML5响应式布局</p>

    <p>IE8-不支持，可使用respond.js解决。</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  &lt;!--[if lt IE 9]&gt;&lt;script src = "http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"&gt;&lt;/script&gt;&lt;![endif]--&gt; 
</code></pre></div>    </div>
  </li>
  <li>
    <p>盒模型</p>

    <p>IE6-不支持自动padding。</p>

    <p>IE7-不支持inline-block/inline-table。</p>

    <p>IE6/7容易出现层级覆盖，因为z-index:auto会创建层叠上下文。</p>

    <p>利用拉伸实现全屏效果（IE7+）</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> div{
   position:absolute;top:0;right:0;bottom:0;left:0;
 }
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="javascript兼容情况">javascript兼容情况</h2>
<h3 id="核心js">核心JS</h3>
<p><strong>IE8-一般不支持ES5＋。</strong></p>

<ol>
  <li>
    <p>ES5支持字符串索引访问</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> var str='abc';
 str[0]//IE7-不支持 =&gt;str.charAt(0)
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="dom">DOM</h3>
<p>IE5开始支持DOM 1级，直到IE5.5才完全支持。IE8开始修复DOM的bug。</p>

<ol>
  <li>
    <p>节点树和元素树</p>

    <p>IE不支持元素树。对于节点树，IE与其它浏览器的解析不同，其它浏览器会包含Text节点。IE8-无内置Node对象。</p>

    <p>获取节点时，Chrome、Firefox、IE9+等现代浏览器下，获取到的是ElementNode和TextNode，它会将空格符、回车符、换行符也看做文本节点，而IE8-则会无视空格、回车符。</p>

    <table>
 <caption>DOM操作相关属性／方法</caption>
 <tr>
   <th>功能</th>
   <th>属性／方法</th> 
   <th>说明</th>
 </tr>
 <tr>
   <td>获取子节点</td>
   <td> `childNodes`标准属性
      
   `children` 非标准属性</td>
   <td>`children`不包含TextNode。但IE6会包含CommentNode。  </td>
 </tr>
 <tr>
   <td>获取兄弟节点</td>
   <td>nextSibling/previousSibling</td>
   <td></td>
 </tr>
 <tr>
   <td>获取兄弟元素</td>
   <td>nextElementSibling/previousElementSibling</td>
   <td></td>
 </tr>
 <tr>
   <td>获取某位置节点</td>
   <td>firstChild/lastChild</td>
   <td></td>
 </tr>
 <tr>
   <td>获取某位置元素</td>
   <td>firstElementChild/lastElementChild</td>
   <td></td>
 </tr>
 <tr>
   <td>拷贝节点</td>
   <td>cloneNode()</td>
   <td></td>
 </tr>
 <tr>
   <td>获取／设置/创建属性</td>
   <td>getAttribute()/setAttribute()/createAttribute()/attributes[index]</td>
   <td>IE7-只能使用element.href获取／设置</td>
 </tr>
 <tr>
   <td>获取css样式</td>
   <td>currentStyle IE8-
      
   getComputedStyle()</td>
   <td>获取非內联样式，设置时使用element.style.cssAtrr</td>
 </tr>
 <tr>
   <td>获取／设置文本内容</td>
   <td>innerText IE8-textContent</td>
   <td></td>
 </tr>
</table>
  </li>
</ol>
<p>&lt;/table&gt;</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**查找元素**

`querySeletor()`/ `querySeletorAll()` IE7~10只支持CSS2选择器，IE6-不支持此方法。

`getElementsByClassName` IE10-不支持。	
</code></pre></div></div>

<ol>
  <li>DOM事件
    <ul>
      <li>
        <p>事件模型</p>

        <p>IE使用冒泡事件模型，其它现代浏览器使用捕获冒泡事件模型。</p>
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  function XXX(event){
      event= event||window.event;//IE中使用全局Event对象
  }
</code></pre></div>        </div>
      </li>
      <li>事件及属性
        <table>
    <tr>
      <th></th>
      <th>其它浏览器</th>
      <th>IE</th>
    </tr>
    <tr>
      <td>阻止默认事件</td>
      <td>event.preventDefault()</td>
      <td>event.returnValue=false</td>
    </tr>
    <tr>
      <td>阻止事件传播</td>
      <td>event.stopPropagation()</td>
      <td>event.cancelBubble=true</td>
    </tr>
    <tr>
      <td>事件源</td>
      <td>event.target  ff/chorme</td>
      <td>event.srcElement  IE8-/chrome</td>
    </tr>
    <tr>
      <td>按键码</td>
      <td>event.keyCode/Event.which  ff/chrome</td>
      <td>event.charCode IE8-</td>
    </tr>
  </table>

        <p>setCapture/releaseCapture IE8-专用</p>
      </li>
      <li>
        <p>事件绑定</p>

        <p>DOM 2级事件</p>
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  myBtn.attachEvent('onclick',myFunc);  //IE8-
  myBtn.addEventListener('click',myFunc,?isCapture); //现代浏览器		
</code></pre></div>        </div>
      </li>
      <li>
        <p>DOMContentLoaded  IE8- 不支持</p>

        <p>window的load事件则在全部资源加载完毕时才触发，DOM 3级标准推出了	DOMContentLoaded优化了这个过程。当文档加载解析完毕且所有延迟脚本都执行完毕时会触发DOMContentLoaded事件，此时图片和异步资源可能依旧在加载，但文档已经为操作准备就绪了。</p>

        <p>DOM的兼容ready实现（大概同 jQuery）</p>

        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   function domReady(fn) {
    //现代浏览器
    if (document.addEventListener) {
      document.addEventListener('DOMContentLoaded', fn, false);
    } else {
      IEContentLoaded(fn);
    }
    //IE模拟DOMContentLoaded
    function IEContentLoaded(fn) {
      var d = document,
        done = false;
      //执行一次用户回调函数init()
      function init() {
        if (!done) {
          done = true;
          fn();
        }
      }
      //立即执行hack
      (function() {
        try {
          d.documentElement.doScroll('left');
        } catch (e) {
          //延迟再试一次
          setTimeout(arguments.callee, 50);
          return;
        }
        //直到没有错误
        init();
      })();
      //监听document的加载状态
      d.onreadystatechange = function() {
        //如果用户是在domReady之后绑定的函数，就立马执行
        if (d.readyState == 'complete') {
          d.onreadystatechange = null;
          init();
        }
      };
    }
  }
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>ajax</p>

    <p>IE6-不兼容Ajax的XMLHttpRequest对象，使用ActiveXobject。</p>
  </li>
  <li>
    <p>window.close()</p>

    <p>IE下提示是否需要关闭，ff无法执行并报错（不能关闭非脚本打开的页面）</p>
  </li>
</ol>

